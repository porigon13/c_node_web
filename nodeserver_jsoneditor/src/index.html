<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Socket.IO chat</title>
  <script src= "/socket.io/socket.io.js"></script>
  <script>integrity="sha384-fKnu0iswBIqkjxrhQCTZ7qlLHOFEgNkRmK2vaO/LbTZSXdJfAu6ewRBdwHPhBo/H"</script>
  <script>crossorigin="anonymous"</script> 
</head>
<body>

  <canvas id="field" width="2000" height="3000"></canvas>
  <script type="text/javascript">
    // var out = document.getElementById("out");
    // var msg = document.getElementById("msg");
    var socket = io();
    // getWindowSize();
    onload = function() 
    {
      // const x = 135/117;
      // console.log(window.innerWidth);
      // console.log(window.innerHeight);
      let wx = window.innerWidth-20;
      let wy = window.innerHeight-10;

      //外枠の線
      var ctx = document.getElementById('field').getContext('2d');
      // ctx.font = '24px serif';
      // // ctx.strokeText('ガリガリ君', 300, 600);
      // // ctx.strokeText('ガリガリ君', 300, 624);
      var field_canvas = document.getElementById("field");
      var field_ctx = field_canvas.getContext("2d");

      // field_ctx.beginPath();
      // field_ctx.moveTo(0,0);
      // field_ctx.lineTo(wx,0);
      // field_ctx.lineTo(wx,wy);
      // field_ctx.lineTo(0,wy);
      // field_ctx.closePath();
      // field_ctx.stroke();

      var rect_canvas = document.getElementById("field");
      var rect_ctx = rect_canvas.getContext("2d");
      // rect_ctx.beginPath();
      // rect_ctx.strokeRect(wx*(4.3/9),wy*(0.5/10.5), wx*(200/8000), wy*(1500/9350));
      // rect_ctx.strokeRect(wx*(1.3/9), wy*(1.8/10.5), wx*(450/8000), wy*(1500/9350));
      // rect_ctx.strokeRect(wx*(7/9), wy*(1.8/10.5), wx*(450/8000),wy*(1500/9350));
      // rect_ctx.strokeRect(wx*(4/9), wy*(4/10.5), wx*(800/8000), wy*(1000/9350));
      rect_ctx.strokeRect(0,0,wx/5,wy/2);         
      rect_ctx.strokeRect(wx/5,0,wx/5,wy/2);      //1
      rect_ctx.strokeRect(wx/5*2,0,wx/5,wy/4);    //2
      rect_ctx.strokeRect(wx/5*2,wy/4,wx/5,wy/4); //3
      rect_ctx.strokeRect(wx/5*3,0,wx/5,wy/2);    //4
      rect_ctx.strokeRect(wx/5*4,0,wx/5,wy/2);    
      rect_ctx.strokeRect(0,wy/4*2,wx/5,wy/2);    
      rect_ctx.strokeRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
      rect_ctx.strokeRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
      rect_ctx.strokeRect(wx/5,wy/4*3,wx/5,wy/4);       //7
      rect_ctx.strokeRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
      rect_ctx.strokeRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
      rect_ctx.strokeRect(wx/5*4,wy/4*2,wx/5,wy/2);


    
      
      let num;
      let color;
      let context = field.getContext("2d");
      socket.on("fromC_receiveMessage", (message) => 
      {
        // console.log(message);
        if("1"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle = "red";
            rect_ctx.fillRect(wx/5,0,wx/5,wy/2);
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle = "blue";
            rect_ctx.fillRect(wx/5,0,wx/5,wy/2);
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle = "green";
            rect_ctx.fillRect(wx/5,0,wx/5,wy/2);
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle = "yellow";
            rect_ctx.fillRect(wx/5,0,wx/5,wy/2);
          }
          if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(wx/5,0,wx/5,wy/2);
          }
          rect_ctx.strokeRect(wx/5,0,wx/5,wy/2);
        }
        else if("2"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle ="red";
            rect_ctx.fillRect(wx/5*2,0,wx/5,wy/4);
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle ="blue";
            rect_ctx.fillRect(wx/5*2,0,wx/5,wy/4);
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle ="green";
            rect_ctx.fillRect(wx/5*2,0,wx/5,wy/4);
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle ="yellow";
            rect_ctx.fillRect(wx/5*2,0,wx/5,wy/4);
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle ="white";
            rect_ctx.fillRect(wx/5*2,0,wx/5,wy/4);
          }
          rect_ctx.strokeRect(wx/5*2,0,wx/5,wy/4);
        }
        if("3"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle="red"
            rect_ctx.fillRect(wx/5*2,wy/4,wx/5,wy/4);
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle="blue";
            rect_ctx.fillRect(wx/5*2,wy/4,wx/5,wy/4);
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle="yellow";
            rect_ctx.fillRect(wx/5*2,wy/4,wx/5,wy/4);
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle="green";
            rect_ctx.fillRect(wx/5*2,wy/4,wx/5,wy/4);
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(wx/5*2,wy/4,wx/5,wy/4);
          }
          rect_ctx.strokeRect(wx/5*2,wy/4,wx/5,wy/4);
        }
        if("4"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle="red"
            rect_ctx.fillRect(wx/5*3,0,wx/5,wy/2);    //4
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle="blue";
            rect_ctx.fillRect(wx/5*3,0,wx/5,wy/2);    //4
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle="yellow";
            rect_ctx.fillRect(wx/5*3,0,wx/5,wy/2);    //4
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle="green";
            rect_ctx.fillRect(wx/5*3,0,wx/5,wy/2);    //4
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(wx/5*3,0,wx/5,wy/2);    //4
          }
          rect_ctx.strokeRect(wx/5*3,0,wx/5,wy/2);    //4
        }
        if("5"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle="red"
            rect_ctx.fillRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle="blue";
            rect_ctx.fillRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle="yellow";
            rect_ctx.fillRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle="green";
            rect_ctx.fillRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
          }
          rect_ctx.strokeRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
        }
        if("6"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle="red"
            rect_ctx.fillRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle="blue";
            rect_ctx.fillRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle="yellow";
            rect_ctx.fillRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle="green";
            rect_ctx.fillRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
          }
          rect_ctx.strokeRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
        }
        if("7"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle="red"
            rect_ctx.fillRect(wx/5,wy/4*3,wx/5,wy/4);       //7
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle="blue";
            rect_ctx.fillRect(wx/5,wy/4*3,wx/5,wy/4);       //7
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle="yellow";
            rect_ctx.fillRect(wx/5,wy/4*3,wx/5,wy/4);       //7
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle="green";
            rect_ctx.fillRect(wx/5,wy/4*3,wx/5,wy/4);       //7
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(wx/5,wy/4*3,wx/5,wy/4);       //7
          }
          rect_ctx.strokeRect(wx/5,wy/4*3,wx/5,wy/4);       //7
        }
        if("8"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle="red"
            rect_ctx.fillRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle="blue";
            rect_ctx.fillRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle="yellow";
            rect_ctx.fillRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle="green";
            rect_ctx.fillRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
          }
          rect_ctx.strokeRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
        }
        if("9"==message.charAt(0))
        {
          if("r"==message.charAt(1))
          {
            rect_ctx.fillStyle="red"
            rect_ctx.fillRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
          }
          else if("b"==message.charAt(1))
          {
            rect_ctx.fillStyle="blue";
            rect_ctx.fillRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
          }
          else if("y"==message.charAt(1))
          {
            rect_ctx.fillStyle="yellow";
            rect_ctx.fillRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
          }
          else if("g"==message.charAt(1))
          {
            rect_ctx.fillStyle="green";
            rect_ctx.fillRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
          }
          else if("e"==message.charAt(1))
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
          }
          rect_ctx.strokeRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
        }
        else if(message.charAt(0)=="P")
        {
          
          if(message.charAt(1)=="1")
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(0,0,wx/5,wy/6); 
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("P","");
            message = message.replace("1","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("rpm",px/1.5,px);
            context.fillText("= "+message,(wx/5-textWidth)/2-px,px*2.5);
          }
          else if(message.charAt(1)=="2")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(wx/5*4,0,wx/5,wy/6);
            rect_ctx.fillStyle="black";          
            let px= wx/50;
            message = message.replace("P","");
            message = message.replace("2","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("rpm",wx/10*8+px/1.5,px);
            context.fillText("= "+message,wx/10*8+(wx/5-textWidth)/2-px,px*2.5);
          }
          else if(message.charAt(1)=="3")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(0,wy/4*2,wx/5,wy/6);
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("P","");
            message = message.replace("3","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("rpm",px/1.5,wy/2+px);
            context.fillText("= "+message,(wx/5-textWidth)/2-px,wy/2+px*2.5);

          }
          else if(message.charAt(1)=="4")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(wx/5*4,wy/4*2,wx/5,wy/6);
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("P","");
            message = message.replace("4","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("rpm",wx/10*8+px/1.5,px+wy/2);
            context.fillText("= "+message,wx/10*8+(wx/5-textWidth)/2-px,wy/2+px*2.5);
          }
        }
        else if(message.charAt(0)=="A")
        {
          
          if(message.charAt(1)=="1")
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(0,wy/6,wx/5,wy/6); 
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("A","");
            message = message.replace("1","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("pitch",px/1.5,px*3+wy/6);
            context.fillText("= "+message,(wx/5-textWidth)/2-px,px*4.5+wy/6);
          }
          else if(message.charAt(1)=="2")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(wx/5*4,wy/6,wx/5,wy/6);
            rect_ctx.fillStyle="black";          
            let px= wx/50;
            message = message.replace("A","");
            message = message.replace("2","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("pitch",wx/10*8+px/1.5,px*3+wy/6);
            context.fillText("= "+message,wx/10*8+(wx/5-textWidth)/2-px,px*4.5+wy/6);
          }
          else if(message.charAt(1)=="3")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(0,wy/4*2+wy/6,wx/5,wy/6);
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("A","");
            message = message.replace("3","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("pitch",px/1.5,wy/2+px*3+wy/6);
            context.fillText("= "+message,(wx/5-textWidth)/2-px,wy/2+px*4.5+wy/6);

          }
          else if(message.charAt(1)=="4")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(wx/5*4,wy/4*2+wy/6,wx/5,wy/6);
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("A","");
            message = message.replace("4","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("pitch",wx/10*8+px/1.5,px*3+wy/2+wy/6);
            context.fillText("= "+message,wx/10*8+(wx/5-textWidth)/2-px,wy/2+px*4.5+wy/6);
          }
        }
        else if(message.charAt(0)=="Y")
        {
          
          if(message.charAt(1)=="1")
          {
            rect_ctx.fillStyle="white";
            rect_ctx.fillRect(0,0+wy/3,wx/5,wy/6); 
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("Y","");
            message = message.replace("1","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("yaw",px/1.5,px*5+wy/3);
            context.fillText("= "+message,(wx/5-textWidth)/2-px,px*6.5+wy/3);
          }
          else if(message.charAt(1)=="2")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(wx/5*4,0+wy/3,wx/5,wy/6);
            rect_ctx.fillStyle="black";          
            let px= wx/50;
            message = message.replace("Y","");
            message = message.replace("2","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("yaw",wx/10*8+px/1.5,px*5+wy/3);
            context.fillText("= "+message,wx/10*8+(wx/5-textWidth)/2-px,px*6.5+wy/3);
          }
          else if(message.charAt(1)=="3")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(0,wy/4*2+wy/3,wx/5,wy/6);
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("Y","");
            message = message.replace("3","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("yaw",px/1.5,wy/2+px*5+wy/3);
            context.fillText("= "+message,(wx/5-textWidth)/2-px,wy/2+px*6.5+wy/3);

          }
          else if(message.charAt(1)=="4")
          {
            rect_ctx.fillStyle = "white";
            rect_ctx.fillRect(wx/5*4,wy/4*2+wy/3,wx/5,wy/6);
            rect_ctx.fillStyle="black";        
            let px= wx/50;
            message = message.replace("Y","");
            message = message.replace("4","");
            let textWidth = context.measureText(message).width;
            context.font = `${px}pt sans-serif`;
            context.fillText("yaw",wx/10*8+px/1.5,px*5+wy/2+wy/3);
            context.fillText("= "+message,wx/10*8+(wx/5-textWidth)/2-px,wy/2+px*6.5+wy/3);
          }
        }
      
        rect_ctx.strokeRect(0,0,wx/5,wy/2);         
        rect_ctx.strokeRect(wx/5,0,wx/5,wy/2);      //1
        rect_ctx.strokeRect(wx/5*2,0,wx/5,wy/4);    //2
        rect_ctx.strokeRect(wx/5*2,wy/4,wx/5,wy/4); //3
        rect_ctx.strokeRect(wx/5*3,0,wx/5,wy/2);    //4
        rect_ctx.strokeRect(wx/5*4,0,wx/5,wy/2);    
        rect_ctx.strokeRect(0,wy/4*2,wx/5,wy/2);    
        rect_ctx.strokeRect(wx/5,wy/4*2,wx/10*3,wy/4);    //5
        rect_ctx.strokeRect(wx/10*5,wy/4*2,wx/10*3,wy/4); //6
        rect_ctx.strokeRect(wx/5,wy/4*3,wx/5,wy/4);       //7
        rect_ctx.strokeRect(wx/5*2,wy/4*3,wx/5,wy/4);     //8
        rect_ctx.strokeRect(wx/5*3,wy/4*3,wx/5,wy/4);     //9
        rect_ctx.strokeRect(wx/5*4,wy/4*2,wx/5,wy/2);
      }
    );
  }
  </script>
</body>
</html>

